{"ast":null,"code":"import React,{useState,useRef,useEffect}from\"react\";import{useNavigate}from'react-router-dom';import\"../css/pick.css\";// Import CSS\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const totalCards=78;const radius=900;// ขนาดความโค้งของไพ่\nconst maxRotation=90;// องศาสูงสุดที่หมุนไปได้\nconst minRotation=-90;// องศาต่ำสุดที่หมุนไปได้\nconst friction=0.9;// ลดแรงหน่วงของ inertia เพื่อให้สมูทขึ้น\nconst smoothFactor=0.2;// ลดความไวของการลากเมาส์\nconst Pick=()=>{const navigate=useNavigate();const[rotation,setRotation]=useState(0);const smoothRotation=useRef(0);const velocity=useRef(0);const dragStart=useRef(null);const isDragging=useRef(false);const animationFrame=useRef(null);// ฟังก์ชันจับการเริ่มลาก\nconst handleMouseDown=e=>{dragStart.current=e.clientX;isDragging.current=true;velocity.current=0;document.addEventListener(\"mousemove\",handleMouseMove);document.addEventListener(\"mouseup\",handleMouseUp);};// ฟังก์ชันลากเมาส์เพื่อหมุนไพ่\nconst handleMouseMove=e=>{if(!isDragging.current)return;const delta=(e.clientX-dragStart.current)*smoothFactor;// ลดความไวของเมาส์\nvelocity.current=delta;dragStart.current=e.clientX;};// ฟังก์ชันหยุดลาก\nconst handleMouseUp=()=>{isDragging.current=false;document.removeEventListener(\"mousemove\",handleMouseMove);document.removeEventListener(\"mouseup\",handleMouseUp);animateInertia();// เรียกใช้ Inertia Effect\n};// เพิ่มฟังก์ชันสำหรับ Touch\nconst handleTouchStart=e=>{dragStart.current=e.touches[0].clientX;isDragging.current=true;velocity.current=0;};const handleTouchMove=e=>{if(!isDragging.current)return;const delta=(e.touches[0].clientX-dragStart.current)*smoothFactor;velocity.current=delta;dragStart.current=e.touches[0].clientX;};const handleTouchEnd=()=>{isDragging.current=false;animateInertia();};// ฟังก์ชันทำให้หมุนสมูทขึ้น\nconst animateInertia=()=>{if(!isDragging.current){velocity.current*=friction;// ลดความเร็วลงเรื่อยๆ\n}smoothRotation.current+=velocity.current;smoothRotation.current=Math.max(minRotation,Math.min(maxRotation,smoothRotation.current));setRotation(smoothRotation.current);if(Math.abs(velocity.current)>0.01){animationFrame.current=requestAnimationFrame(animateInertia);}else{velocity.current=0;cancelAnimationFrame(animationFrame.current);}};useEffect(()=>{animationFrame.current=requestAnimationFrame(animateInertia);return()=>cancelAnimationFrame(animationFrame.current);},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"pick-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"drag-area\",onMouseDown:handleMouseDown,onTouchStart:handleTouchStart,onTouchMove:handleTouchMove,onTouchEnd:handleTouchEnd}),/*#__PURE__*/_jsxs(\"div\",{className:\"drag-text\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\\u0E44\\u0E1E\\u0E48\\u0E40\\u0E25\\u0E22 1 \\u0E43\\u0E1A\"}),/*#__PURE__*/_jsx(\"p\",{children:\"[\\u0E40\\u0E25\\u0E37\\u0E48\\u0E2D\\u0E19\\u0E40\\u0E1E\\u0E37\\u0E48\\u0E2D\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\\u0E44\\u0E1E\\u0E48]\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"curved-card-container\",children:Array.from({length:totalCards}).map((_,index)=>{const angle=(index/(totalCards-1)-0.5)*Math.PI;const rotatedAngle=angle+rotation*Math.PI/180;const x=radius*Math.sin(rotatedAngle);const y=radius*(1-Math.cos(rotatedAngle));return/*#__PURE__*/_jsx(\"div\",{className:\"card-picked\",style:{transform:`translate(${x}px, ${y}px) rotate(${rotatedAngle}rad)`},children:/*#__PURE__*/_jsx(\"button\",{className:\"btn-card\",onClick:()=>navigate('/result'),children:/*#__PURE__*/_jsx(\"img\",{src:\"/image/back.jpg\",alt:\"card-back\"})})},index);})})]});};export default Pick;","map":{"version":3,"names":["React","useState","useRef","useEffect","useNavigate","jsx","_jsx","jsxs","_jsxs","totalCards","radius","maxRotation","minRotation","friction","smoothFactor","Pick","navigate","rotation","setRotation","smoothRotation","velocity","dragStart","isDragging","animationFrame","handleMouseDown","e","current","clientX","document","addEventListener","handleMouseMove","handleMouseUp","delta","removeEventListener","animateInertia","handleTouchStart","touches","handleTouchMove","handleTouchEnd","Math","max","min","abs","requestAnimationFrame","cancelAnimationFrame","className","children","onMouseDown","onTouchStart","onTouchMove","onTouchEnd","Array","from","length","map","_","index","angle","PI","rotatedAngle","x","sin","y","cos","style","transform","onClick","src","alt"],"sources":["/Users/jeerapat/Horoscope_Web 2/client/src/pages/pick.jsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from \"react\";\nimport { useNavigate } from 'react-router-dom';\nimport \"../css/pick.css\"; // Import CSS\n\nconst totalCards = 78;\nconst radius = 900; // ขนาดความโค้งของไพ่\nconst maxRotation = 90; // องศาสูงสุดที่หมุนไปได้\nconst minRotation = -90; // องศาต่ำสุดที่หมุนไปได้\nconst friction = 0.9; // ลดแรงหน่วงของ inertia เพื่อให้สมูทขึ้น\nconst smoothFactor =0.2; // ลดความไวของการลากเมาส์\n\nconst Pick = () => {\n  const navigate = useNavigate();\n  const [rotation, setRotation] = useState(0);\n  const smoothRotation = useRef(0);\n  const velocity = useRef(0);\n  const dragStart = useRef(null);\n  const isDragging = useRef(false);\n  const animationFrame = useRef(null);\n\n  // ฟังก์ชันจับการเริ่มลาก\n  const handleMouseDown = (e) => {\n    dragStart.current = e.clientX;\n    isDragging.current = true;\n    velocity.current = 0;\n    document.addEventListener(\"mousemove\", handleMouseMove);\n    document.addEventListener(\"mouseup\", handleMouseUp);\n  };\n\n  // ฟังก์ชันลากเมาส์เพื่อหมุนไพ่\n  const handleMouseMove = (e) => {\n    if (!isDragging.current) return;\n    const delta = (e.clientX - dragStart.current) * smoothFactor; // ลดความไวของเมาส์\n    velocity.current = delta;\n    dragStart.current = e.clientX;\n  };\n\n  // ฟังก์ชันหยุดลาก\n  const handleMouseUp = () => {\n    isDragging.current = false;\n    document.removeEventListener(\"mousemove\", handleMouseMove);\n    document.removeEventListener(\"mouseup\", handleMouseUp);\n    animateInertia(); // เรียกใช้ Inertia Effect\n  };\n\n  // เพิ่มฟังก์ชันสำหรับ Touch\nconst handleTouchStart = (e) => {\n  dragStart.current = e.touches[0].clientX;\n  isDragging.current = true;\n  velocity.current = 0;\n};\n\nconst handleTouchMove = (e) => {\n  if (!isDragging.current) return;\n  const delta = (e.touches[0].clientX - dragStart.current) * smoothFactor;\n  velocity.current = delta;\n  dragStart.current = e.touches[0].clientX;\n};\n\nconst handleTouchEnd = () => {\n  isDragging.current = false;\n  animateInertia();\n};\n\n\n  // ฟังก์ชันทำให้หมุนสมูทขึ้น\n  const animateInertia = () => {\n    if (!isDragging.current) {\n      velocity.current *= friction; // ลดความเร็วลงเรื่อยๆ\n    }\n\n    smoothRotation.current += velocity.current;\n    smoothRotation.current = Math.max(minRotation, Math.min(maxRotation, smoothRotation.current));\n\n    setRotation(smoothRotation.current);\n\n    if (Math.abs(velocity.current) > 0.01) {\n      animationFrame.current = requestAnimationFrame(animateInertia);\n    } else {\n      velocity.current = 0;\n      cancelAnimationFrame(animationFrame.current);\n    }\n  };\n\n  useEffect(() => {\n    animationFrame.current = requestAnimationFrame(animateInertia);\n    return () => cancelAnimationFrame(animationFrame.current);\n  }, []);\n\n  return (\n    <div className=\"pick-container\">\n      <div\n        className=\"drag-area\"\n        onMouseDown={handleMouseDown}\n        onTouchStart={handleTouchStart}\n        onTouchMove={handleTouchMove}\n        onTouchEnd={handleTouchEnd}\n      />\n      <div className=\"drag-text\">\n        <h1>เลือกไพ่เลย 1 ใบ</h1>\n        <p>[เลื่อนเพื่อเลือกไพ่]</p>\n      </div>\n      {/* พื้นที่ลากไพ่ (อยู่นอกไพ่) */}\n      <div className=\"curved-card-container\">\n        {Array.from({ length: totalCards }).map((_, index) => {\n          const angle = ((index / (totalCards - 1)) - 0.5) * Math.PI;\n          const rotatedAngle = angle + (rotation * Math.PI) / 180;\n          const x = radius * Math.sin(rotatedAngle);\n          const y = radius * (1 - Math.cos(rotatedAngle));\n\n          return (\n            <div\n              key={index}\n              className=\"card-picked\"\n              style={{\n                transform: `translate(${x}px, ${y}px) rotate(${rotatedAngle}rad)`,\n              }}\n            >\n              <button className=\"btn-card\" onClick={() => navigate('/result')}><img src=\"/image/back.jpg\" alt=\"card-back\" /></button>\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n};\n\nexport default Pick;\n\n\n\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}